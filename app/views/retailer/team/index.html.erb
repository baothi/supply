<% content_for :title, "Settings" %>
<% content_for :main_menu, Hingeto::Section::SETTINGS %>
<% content_for :inner_menu, Hingeto::Section::TEAM %>
<body class="animsition page-aside-static page-aside-left">
<%= render "shared/outdated_browser" %>
<%= render "shared/nav_bar" %>
<%= render "retailer/shared/side_menu" %>
<%= render "shared/grid_menu" %>


<div class="page">
  <%#= render "retailer/settings/shared/menu" %>
  <div class="page-main">
    <div class="page-header">
      <%= render :partial=>"shared/alerts" %>
      <h1 class="page-title">Accounts</h1>
    </div>

    <div class="page-content">
      <div class="panel">
        <div class="panel-heading">
          <h3 class="panel-title">Team Members</h3>
        </div>
        <div class="panel-body">
        <!-- Content -->
         <div class="row">
           <div class="col-lg-12 col-xs-12">
             <!-- Example Basic -->
             <div class="example-wrap">
               <div class="example table-responsive">
                 <table class="table">
                   <thead>
                   <tr>
                     <th>Avatar</th>
                     <th>Full Name</th>
                     <th>Role</th>
                   </tr>
                   </thead>
                   <tbody>
                   <% current_retailer.team_members.each do |team_member| %>
                     <tr>
                      <td>
                        <div class="media-left">
                          <%= link_to member_retailer_team_index_path(team_member.internal_identifier), class: "avatar avatar-online" do %>
                            <%= image_tag "placeholders/avatar.png", alt: team_member.user.last_name %>
                          <% end %>
                        </div>
                      </td>
                      <td>
                        <%= link_to "#{team_member.user.full_name_for_display}", member_retailer_team_index_path(team_member.internal_identifier) %>
                      </td>
                      <td>
                        <span class="tag tag-info"><%= team_member.role.name.humanize.titleize %></span>
                      </td>
                     </tr>
                   <% end %>
                   </tbody>
                 </table>
               </div>
             </div>
             <!-- End Example Basic -->
           </div>
         </div>

        </div>
      </div>

      <% if current_spree_user.retailer_owner_or_admin? %>
        <div class="panel">
          <div class="panel-heading">
            <h3 class="panel-title">Add Account</h3>
          </div>
          <div class="panel-body">
            <%= form_for(Spree::User.new, :url => { action: :add_account }) do |f| %>

              <div class="row">

                <div class="form-group col-sm-8">
                  <%= f.label :email, "Email Address" %>
                  <%= f.text_field :email, class:"form-control", :placeholder => "Please enter email", required: true %>
                </div>
                <div class="form-group col-sm-4">
                  <%= f.label :password, "Default Password" %>
                  <div class="input-group">
                    <%= f.password_field :password, value: SecureRandom.hex(4), class:"form-control", required: true, min: 6 %>
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button" id="password_eye"><i class="fa fa-eye" aria-hidden="true"></i></button>
                    </span>
                  </div>
                </div>
                <div class="form-group col-sm-6">
                  <label class="control-label" for="inputBasicFirstName">First Name </label>
                  <%= f.label :first_name, "First Name" %>
                  <%= f.text_field :first_name, class:"form-control", :placeholder => "Enter First Name", required: true %>
                </div>
                <div class="form-group col-sm-6">
                  <label class="control-label" for="inputBasicFirstName">Last Name </label>
                  <%= f.label :last_name, "Last Name" %>
                  <%= f.text_field :last_name, class:"form-control", :placeholder => "Enter Last Name", required: true %>
                </div>

                <div class="form-group col-sm-12">
                  <%= label_tag :spree_role_name, "Account Role" %>
                  <%= select_tag :spree_role_id, options_for_select(Spree::Role.where(name: ['retailer_admin']).map { |role| [role.name.humanize.titleize, role.id] }), prompt: "Please select account's role", class: "form-control", required: true %>
                </div>
              </div>
              <div class="form-group">
                <%= f.submit "Add", class: "btn btn-primary" -%>
              </div>
            <% end %>

          </div>
        </div>
      <% end %>

    </div>

  </div>
</div>
<%= render "shared/platform/footer" %>
</body>
